#ifndef _CUST_BATTERY_METER_TABLE_H
#define _CUST_BATTERY_METER_TABLE_H

#include <mach/mt_typedefs.h>

// ============================================================
// define
// ============================================================
#define BAT_NTC_10 1
#define BAT_NTC_47 0

#if (BAT_NTC_10 == 1)
#define RBAT_PULL_UP_R             16900	
#define RBAT_PULL_DOWN_R		   27000	
#endif

#if (BAT_NTC_47 == 1)
#define RBAT_PULL_UP_R             61900	
#define RBAT_PULL_DOWN_R		  100000	
#endif
#define RBAT_PULL_UP_VOLT          1800



// ============================================================
// ENUM
// ============================================================

// ============================================================
// structure
// ============================================================

// ============================================================
// typedef
// ============================================================
typedef struct _BATTERY_PROFILE_STRUC
{
    kal_int32 percentage;
    kal_int32 voltage;
} BATTERY_PROFILE_STRUC, *BATTERY_PROFILE_STRUC_P;

typedef struct _R_PROFILE_STRUC
{
    kal_int32 resistance; // Ohm
    kal_int32 voltage;
} R_PROFILE_STRUC, *R_PROFILE_STRUC_P;

typedef enum
{
    T1_0C,
    T2_25C,
    T3_50C
} PROFILE_TEMPERATURE;

// ============================================================
// External Variables
// ============================================================

// ============================================================
// External function
// ============================================================

// ============================================================
// <DOD, Battery_Voltage> Table
// ============================================================
#if (BAT_NTC_10 == 1)
    BATT_TEMPERATURE Batt_Temperature_Table[] = {
        {-20,68237},
        {-15,53650},
        {-10,42506},
        { -5,33892},
        {  0,27219},
        {  5,22021},
        { 10,17926},
        { 15,14674},
        { 20,12081},
        { 25,10000},
        { 30,8315},
        { 35,6948},
        { 40,5834},
        { 45,4917},
        { 50,4161},
        { 55,3535},
        { 60,3014}
    };
#endif

#if (BAT_NTC_47 == 1)
    BATT_TEMPERATURE Batt_Temperature_Table[] = {
        {-20,483954},
        {-15,360850},
        {-10,271697},
        { -5,206463},
        {  0,158214},
        {  5,122259},
        { 10,95227},
        { 15,74730},
        { 20,59065},
        { 25,47000},
        { 30,37643},
        { 35,30334},
        { 40,24591},
        { 45,20048},
        { 50,16433},
        { 55,13539},
        { 60,11210}        
    };
#endif

// T0 -10C
BATTERY_PROFILE_STRUC battery_profile_t0[] =
{
	{0 ,  4264},         
	{2 ,  4211},         
	{5 ,  4186},         
	{7 ,  4164},         
	{10, 4144},         
	{12, 4125},         
	{14, 4106},         
	{17, 4089},         
	{19, 4072},         
	{21, 4057},         
	{24, 4045},         
	{26, 4031},         
	{29, 4015},         
	{31, 3997},         
	{33, 3978},         
	{36, 3960},         
	{38, 3943},         
	{41, 3927},         
	{43, 3914},         
	{45, 3901},         
	{48, 3889},         
	{50, 3877},         
	{52, 3865},         
	{55, 3853},         
	{57, 3841},         
	{60, 3829},         
	{62, 3817},         
	{64, 3806},         
	{67, 3794},         
	{69, 3783},         
	{72, 3771},         
	{74, 3760},         
	{76, 3749},         
	{79, 3737},         
	{81, 3727},         
	{83, 3714},         
	{86, 3701},         
	{88, 3685},         
	{91, 3663},         
	{93, 3631},         
	{95, 3586},         
	{98, 3517},         
	{99, 3394},         
	{99, 3394},             
	{99, 3394},                      
	{100, 3393},                        
	{100, 3393},                     
	{100, 3393},                       
	{100, 3393},                        
	{100, 3393},                     
	{100, 3310},                              
	{100, 3310},                       
	{100, 3310},                     
	{100, 3310},                              
	{100, 3310},                       
	{100, 3310},                    
	{100, 3310},                              
	{100, 3310},                       
	{100, 3310},                    
	{100, 3310},                           
     	{100, 3310}
};      
        
// T1 0C 
BATTERY_PROFILE_STRUC battery_profile_t1[] =
{
	{0   , 4288 },         
	{2   , 4263 },         
	{4   , 4244 },         
	{6   , 4226 },         
	{8   , 4209 },         
	{10  ,4191  },         
	{13  ,4174  },         
	{15  ,4157  },         
	{17  ,4138  },         
	{19  ,4121  },         
	{21  ,4103  },         
	{23  ,4086  },         
	{25  ,4070  },         
	{27  ,4054  },         
	{29  ,4041  },         
	{31  ,4027  },         
	{33  ,4010  },         
	{36  ,3994  },         
	{38  ,3977  },         
	{40  ,3961  },         
	{42  ,3948  },         
	{44  ,3937  },         
	{46  ,3927  },         
	{48  ,3917  },         
	{50  ,3908  },         
	{52  ,3899  },         
	{54  ,3890  },         
	{57  ,3879  },         
	{59  ,3869  },         
	{61  ,3859  },         
	{63  ,3849  },         
	{65  ,3839  },         
	{67  ,3829  },         
	{69  ,3819  },         
	{71  ,3810  },         
	{73  ,3799  },         
	{75  ,3788  },         
	{77  ,3778  },         
	{80  ,3767  },         
	{82  ,3757  },         
	{84  ,3747  },         
	{86  ,3736  },         
	{88  ,3726  },         
	{90  ,3718  },         
	{92  ,3711  },         
	{94  ,3704  },         
	{96  ,3697  },         
	{98  ,3685  },         
	{98  ,3662  },         
	{99  ,3617  },         
	{99  ,3540  },         
	{100,3405  },     
	{100,3405  },     
	{100,3405  },     
	{100,3405  },     
	{100,3380  },     
	{100,3380  },     
	{100,3380  },     
	{100,3310  },     
	{100,3310  },     
	{100,3310  }     
};           

// T2 25C
BATTERY_PROFILE_STRUC battery_profile_t2[] =
{
	{0  ,4333 },     //	{0  ,4331 },             
 	{2 ,4309 },         
 	{3 ,4289 },         
	{5 ,4269 },         
	{7 ,4250 },         
	{8 ,4231 },         
	{10 ,4212 },         
	{12,4193  },         
	{13,4175  },         
	{15,4157  },         
	{17,4139  },         
	{18,4121  },         
	{20,4104  },         
	{22,4087  },         
	{23,4072  },         
	{25,4057  },         
	{27,4040  },         
	{28,4022  },         
	{30,4007  },         
	{32,3993  },         
	{33,3981  },         
	{35,3968  },         
	{37,3955  },         
	{38,3942  },         
	{40,3925  },         
	{42,3906  },         
	{43,3888  },         
	{45,3873  },         
	{47,3862  },         
	{48,3852  },         
	{50,3843  },         
	{52,3836  },         
	{53,3828  },         
	{55,3820  },         
	{57,3814  },         
	{58,3808  },         
	{60,3802  },         
	{62,3797  },         
	{63,3792  },         
	{65,3788  },         
	{67,3783  },         
	{68,3779  },         
	{70,3775  },         
	{72,3770  },         
	{73,3766  },         
	{75,3761  },         
	{77,3755  },         
	{78,3748  },         
	{80,3741  },         
	{82,3734  },         
	{83,3721  },         
	{85,3708  },         
	{87,3693  },         
	{88,3684  },         
 	{90,3682  },         
 	{92,3679  },         
 	{93,3676  },         
 	{95,3669  },         
 	{97,3628  },         
 	{98,3541  },         
 	{100,3393  }    
};     

// T3 50C
BATTERY_PROFILE_STRUC battery_profile_t3[] =
{
	{0 ,4337},   //{0 ,4331},              
 	{2 ,4311},         
 	{3 ,4291},         
	{5 ,4272},         
	{7 ,4253},         
	{8 ,4234},         
	{10 ,4215},         
	{12 ,4196},         
	{13 ,4177},         
	{15 ,4159},         
	{17 ,4141},         
	{18 ,4123},         
	{20 ,4106},         
	{21 ,4089},         
	{23 ,4072},         
	{25 ,4056},         
	{26 ,4040},         
	{28 ,4024},         
	{30 ,4009},         
	{31 ,3995},         
	{33 ,3981},         
	{35 ,3968},         
	{36 ,3955},         
	{38 ,3942},         
	{40 ,3929},         
	{41 ,3912},         
	{43 ,3891},         
	{45 ,3875},         
	{46 ,3862},         
	{48 ,3851},         
	{50 ,3842},         
	{51 ,3833},         
	{53 ,3825},         
	{55 ,3817},         
	{56 ,3810},         
	{58 ,3804},         
	{60 ,3798},         
	{61 ,3792},         
	{63 ,3787},         
	{64 ,3782},         
	{66 ,3778},         
	{68 ,3773},         
	{69 ,3768},         
	{71 ,3758},         
	{73 ,3748},         
	{74 ,3743},         
	{76 ,3737},         
	{78 ,3730},         
	{79 ,3724},         
	{81 ,3718},         
	{83 ,3710},         
	{84 ,3697},         
	{86 ,3685},         
	{88 ,3670},         
 	{89 ,3666},         
 	{91 ,3664},         
 	{93 ,3662},         
 	{94 ,3657},         
 	{96 ,3642},         
 	{98 ,3583},  // 	{99 ,3485},          
     	{100,3406},
};           

// battery profile for actual temperature. The size should be the same as T1, T2 and T3
BATTERY_PROFILE_STRUC battery_profile_temperature[] =
{
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },  
	{0  , 0 }, 
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },  
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 }
};    

// ============================================================
// <Rbat, Battery_Voltage> Table
// ============================================================
// T0 -10C
R_PROFILE_STRUC r_profile_t0[] =
{
	{563, 4265},         
	{563, 4211},         
	{770, 4186},         
	{784, 4164},         
	{802, 4144},         
	{797, 4125},         
	{809, 4106},         
	{809, 4089},         
	{823, 4072},         
	{825, 4057},         
	{831, 4045},         
	{825, 4031},         
	{829, 4015},         
	{816, 3997},         
	{820, 3978},         
	{824, 3960},         
	{830, 3943},         
	{841, 3927},         
	{843, 3914},         
	{849, 3901},         
	{856 ,3889 },         
	{863 ,3877 },         
	{862 ,3865 },         
	{863 ,3853 },         
	{874 ,3841 },         
	{873 ,3829 },         
	{877 ,3817 },         
	{881 ,3806 },         
	{885 ,3794 },         
	{891 ,3783 },         
	{891 ,3771 },         
	{897 ,3760 },         
	{910 ,3749 },         
	{903 ,3737 },         
	{915 ,3727 },         
	{926 ,3714 },         
	{929 ,3701 },         
	{915 ,3685 },         
	{916 ,3663 },         
	{907 ,3631 },         
	{898 ,3586 },         
	{850 ,3517 },         
	{734 ,3394 },  
	{734 ,3394 },  
	{734 ,3394 },  
	{734 ,3393 },  
	{734 ,3393 },  
	{734 ,3393 },  
	{734 ,3393 },  
	{734 ,3393 },  
	{733 ,3310 },  
	{733 ,3310 },  
	{733 ,3310 },
	{733 ,3310 },  
	{733 ,3310 },  
	{733 ,3310 },  
	{733 ,3310 },  
	{733 ,3310 },  
	{733 ,3310 },  
	{733 ,3310 },  
	{733 ,3310 }  
};      

// T1 0C
R_PROFILE_STRUC r_profile_t1[] =
{
	{440, 4288 },         
	{440, 4263 },         
	{468, 4244 },         
	{476, 4226 },         
	{479, 4209 },         
	{481 ,4191  },         
	{481 ,4174  },         
	{484 ,4157  },         
	{479 ,4138  },         
	{481 ,4121  },         
	{481 ,4103  },         
	{484 ,4086  },         
	{488 ,4070  },         
	{490 ,4054  },         
	{495 ,4041  },         
	{495 ,4027  },         
	{487 ,4010  },         
	{488 ,3994  },         
	{490 ,3977  },         
	{495 ,3961  },         
	{501 ,3948  },         
	{507 ,3937  },         
	{512 ,3927  },         
	{515 ,3917  },         
	{516 ,3908  },         
	{520 ,3899  },         
	{523 ,3890  },         
	{522 ,3879  },         
	{524 ,3869  },         
	{527 ,3859  },         
	{530 ,3849  },         
	{533 ,3839  },         
	{533 ,3829  },         
	{541 ,3819  },         
	{541 ,3810  },         
	{546 ,3799  },         
	{544 ,3788  },         
	{551 ,3778  },         
	{550 ,3767  },         
	{558 ,3757  },         
	{560 ,3747  },         
	{564 ,3736  },         
	{574 ,3726  },         
	{581 ,3718  },         
	{589 ,3711  },         
	{600 ,3704  },         
	{606 ,3697  },         
	{601 ,3685  },         
	{583 ,3662  },         
	{539 ,3617  },         
	{478 ,3540  },         
	{357 ,3405  },  
	{357,3405 },     
	{357,3405  },     
	{356,3405},   
	{356,3380},
	{356,3380}, 
	{356,3380},        
	{355,3310  },   
	{355,3310  },     
	{355,3310  }
};     

// T2 25C
R_PROFILE_STRUC r_profile_t2[] =
{
	{283 ,4333 },   //231 440 228 231{231 ,4331 },         
 	{231 ,4309 },         
 	{233 ,4289 },         
	{233 ,4269 },         
	{236 ,4250 },         
	{237 ,4231 },         
	{239 ,4212 },         
	{240,4193  },         
	{240,4175  },         
	{242,4157  },         
	{242,4139  },         
	{243,4121  },         
	{247,4104  },         
	{248,4087  },         
	{251,4072  },         
	{256,4057  },         
	{260,4040  },         
	{260,4022  },         
	{264,4007  },         
	{267,3993  },         
	{273,3981  },         
	{276,3968  },         
	{278,3955  },         
	{279,3942  },         
	{271,3925  },         
	{257,3906  },         
	{247,3888  },         
	{240,3873  },         
	{239,3862  },         
	{240,3852  },         
	{237,3843  },         
	{242,3836  },         
	{242,3828  },         
	{242,3820  },         
	{243,3814  },         
	{242,3808  },         
	{242,3802  },         
	{244,3797  },         
	{245,3792  },         
	{247,3788  },         
	{248,3783  },         
	{245,3779  },         
	{247,3775  },         
	{247,3770  },         
	{248,3766  },         
	{249,3761  },         
	{250,3755  },         
	{253,3748  },         
	{261,3741  },         
	{271,3734  },         
	{271,3721  },         
	{279,3708  },         
	{284,3693  },         
	{287,3684  },         
 	{299,3682  },         
 	{316,3679  },         
 	{346,3676  },         
 	{381,3669  },         
 	{400,3628  },         
 	{451,3541  },         
 	{575,3393  },     
}; 

// T3 50C
R_PROFILE_STRUC r_profile_t3[] =
{
	{295 ,4337},  //246 253 440 240	{253 ,4331},             
 	{253 ,4311},         
 	{253 ,4291},         
	{254 ,4272},         
	{254 ,4253},         
	{255 ,4234},         
	{256 ,4215},         
	{258 ,4196},         
	{258 ,4177},         
	{258 ,4159},         
	{259 ,4141},         
	{261 ,4123},         
	{262 ,4106},         
	{264 ,4089},         
	{266 ,4072},         
	{268 ,4056},         
	{271 ,4040},         
	{272 ,4024},         
	{275 ,4009},         
	{278 ,3995},         
	{280 ,3981},         
	{284 ,3968},         
	{289 ,3955},         
	{292 ,3942},         
	{294 ,3929},         
	{288 ,3912},         
	{272 ,3891},         
	{264 ,3875},         
	{260 ,3862},         
	{259 ,3851},         
	{259 ,3842},         
	{259 ,3833},         
	{261 ,3825},         
	{263 ,3817},         
	{264 ,3810},         
	{268 ,3804},         
	{269 ,3798},         
	{273 ,3792},         
	{275 ,3787},         
	{278 ,3782},         
	{281 ,3778},         
	{282 ,3773},         
	{281 ,3768},         
	{270 ,3758},         
	{264 ,3748},         
	{267 ,3743},         
	{267 ,3737},         
	{267 ,3730},         
	{267 ,3724},         
	{270 ,3718},         
	{272 ,3710},         
	{271 ,3697},         
	{273 ,3685},         
	{268 ,3670},         
 	{271 ,3666},         
 	{278 ,3664},         
 	{288 ,3662},         
 	{300 ,3657},         
 	{304 ,3642},         
 	{305 ,3583},  /// 	{326 ,3485},        
       {379 ,3306},
}; 

// r-table profile for actual temperature. The size should be the same as T1, T2 and T3
R_PROFILE_STRUC r_profile_temperature[] =
{
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },  
	{0  , 0 }, 
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },  
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 }
};    

// ============================================================
// function prototype
// ============================================================
int fgauge_get_saddles(void);
BATTERY_PROFILE_STRUC_P fgauge_get_profile(kal_uint32 temperature);

int fgauge_get_saddles_r_table(void);
R_PROFILE_STRUC_P fgauge_get_profile_r_table(kal_uint32 temperature);

#endif	//#ifndef _CUST_BATTERY_METER_TABLE_H

